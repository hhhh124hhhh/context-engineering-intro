# 卡牌对战竞技场 - 生产环境配置
# 请复制此文件为 .env.prod 并根据实际情况修改配置

# =============================================================================
# 应用基础配置
# =============================================================================
NODE_ENV=production
DEBUG=false
LOG_LEVEL=INFO

# =============================================================================
# 数据库配置
# =============================================================================
POSTGRES_DB=cardbattle_prod
POSTGRES_USER=cardbattle
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
DATABASE_URL=postgresql://cardbattle:your_secure_password_here@postgres:5432/cardbattle_prod

# =============================================================================
# Redis 配置
# =============================================================================
REDIS_URL=redis://:your_redis_password_here@redis:6379/0
REDIS_PASSWORD=your_redis_password_here
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# =============================================================================
# 安全配置
# =============================================================================
SECRET_KEY=your_super_secret_key_change_this_in_production
JWT_SECRET_KEY=your_jwt_secret_key_change_this_in_production
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# CORS 配置
# =============================================================================
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com,localhost,127.0.0.1

# =============================================================================
# 前端配置
# =============================================================================
VITE_API_URL=https://yourdomain.com/api
VITE_WS_URL=wss://yourdomain.com/ws
FRONTEND_PORT=3000

# =============================================================================
# 后端配置
# =============================================================================
BACKEND_PORT=8000
API_PREFIX=/api
WORKERS=4

# =============================================================================
# WebSocket 配置
# =============================================================================
WS_HEARTBEAT_INTERVAL=30
WS_MAX_CONNECTIONS=1000

# =============================================================================
# 文件上传配置
# =============================================================================
UPLOAD_DIR=/app/uploads
MAX_UPLOAD_SIZE=10485760  # 10MB
ALLOWED_EXTENSIONS=jpg,jpeg,png,gif,webp

# =============================================================================
# 邮件配置
# =============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password
SMTP_TLS=true
SMTP_SSL=false
EMAIL_FROM=noreply@yourdomain.com
EMAIL_FROM_NAME=Card Battle Arena

# =============================================================================
# 监控配置
# =============================================================================
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001
GRAFANA_PASSWORD=your_grafana_password
LOKI_PORT=3100

# =============================================================================
# 日志配置
# =============================================================================
LOG_DIR=/app/logs
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5
LOG_FORMAT=json

# =============================================================================
# 缓存配置
# =============================================================================
CACHE_TTL=3600  # 1小时
SESSION_TTL=86400  # 24小时
RATE_LIMIT_TTL=3600  # 1小时

# =============================================================================
# 游戏配置
# =============================================================================
MAX_GAME_DURATION=3600  # 1小时
TURN_TIME_LIMIT=90  # 90秒
MAX_HAND_SIZE=10
MAX_DECK_SIZE=30
MIN_DECK_SIZE=30

# =============================================================================
# 匹配系统配置
# =============================================================================
MATCHMAKING_MAX_WAIT_TIME=300  # 5分钟
MATCHMAKING_EXPANSION_THRESHOLD=30
MATCHMAKING_MAX_RATING_DIFF=500
MATCHMAKING_BASE_RATING_DIFF=100

# =============================================================================
# 域名和SSL配置
# =============================================================================
DOMAIN=yourdomain.com
HTTP_PORT=80
HTTPS_PORT=443

# =============================================================================
# 备份配置
# =============================================================================
BACKUP_DIR=/app/backups
BACKUP_SCHEDULE=0 2 * * *  # 每天凌晨2点
BACKUP_RETENTION_DAYS=30

# =============================================================================
# 性能配置
# =============================================================================
MAX_CONNECTIONS=100
MAX_WORKERS=4
WORKER_TIMEOUT=30
KEEP_ALIVE_TIMEOUT=5

# =============================================================================
# 安全增强配置
# =============================================================================
SECURE_SSL_REDIRECT=true
SECURE_HSTS_SECONDS=31536000
SECURE_CONTENT_TYPE_NOSNIFF=true
SECURE_BROWSER_XSS_FILTER=true
X_FRAME_OPTIONS=DENY

# =============================================================================
# 外部服务配置
# =============================================================================
CDN_URL=https://cdn.yourdomain.com
ANALYTICS_ID=your_analytics_id
SENTRY_DSN=your_sentry_dsn

# =============================================================================
# 社交登录配置（可选）
# =============================================================================
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
DISCORD_CLIENT_ID=your_discord_client_id
DISCORD_CLIENT_SECRET=your_discord_client_secret

# =============================================================================
# 支付配置（可选）
# =============================================================================
STRIPE_PUBLIC_KEY=your_stripe_public_key
STRIPE_SECRET_KEY=your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=your_stripe_webhook_secret

# =============================================================================
# 第三方服务配置（可选）
# =============================================================================
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1
AWS_S3_BUCKET=your_s3_bucket

# =============================================================================
# 开发工具配置（生产环境设为false）
# =============================================================================
ENABLE_PROFILING=false
ENABLE_DEBUG_ROUTES=false
ENABLE_SWAGGER_UI=false
ENABLE_REDOC=false