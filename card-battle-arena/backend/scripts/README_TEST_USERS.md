# æµ‹è¯•è´¦å·è¯´æ˜

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•ä½¿ç”¨æµ‹è¯•è´¦å·è„šæœ¬åˆ›å»ºå’Œç®¡ç†æµ‹è¯•ç”¨æˆ·è´¦å·ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºç¡€ç”¨æ³•

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# åˆ›å»ºæ‰€æœ‰æµ‹è¯•è´¦å·
python scripts/create_test_users.py

# åˆ›å»ºç‰¹å®šæµ‹è¯•è´¦å·
python scripts/create_test_users.py --users admin,testuser

# ä½¿ç”¨è‡ªå®šä¹‰å¯†ç 
python scripts/create_test_users.py --password MyPass123
```

### æŸ¥çœ‹å’Œåˆ é™¤

```bash
# åˆ—å‡ºæµ‹è¯•è´¦å·çŠ¶æ€
python scripts/create_test_users.py --list

# é‡ç½®æ‰€æœ‰æµ‹è¯•è´¦å·ï¼ˆå…ˆåˆ é™¤å†åˆ›å»ºï¼‰
python scripts/create_test_users.py --reset

# åªåˆ é™¤æµ‹è¯•è´¦å·
python scripts/create_test_users.py --delete-only
```

## ğŸ‘¥ æµ‹è¯•è´¦å·åˆ—è¡¨

| ç”¨æˆ·å | å¯†ç  | ELO | ç­‰çº§ | è§’è‰² | è¯´æ˜ |
|--------|------|-----|------|------|------|
| admin | Test@123456 | 2500 | 50 | ç®¡ç†å‘˜ | ç³»ç»Ÿç®¡ç†æµ‹è¯• |
| testuser | Test@123456 | 1000 | 10 | æ™®é€šç”¨æˆ· | åŸºç¡€åŠŸèƒ½æµ‹è¯• |
| newbie | Test@123456 | 800 | 3 | æ–°æ‰‹ | æ–°æ‰‹ä½“éªŒæµ‹è¯• |
| master | Test@123456 | 2800 | 80 | é«˜æ‰‹ | é«˜æ®µä½åŠŸèƒ½æµ‹è¯• |
| grandmaster | Test@123456 | 3000 | 100 | å®—å¸ˆ | é¡¶çº§ç©å®¶æµ‹è¯• |
| banned | Test@123456 | 1200 | 15 | è¢«å°ç¦ | å°ç¦åŠŸèƒ½æµ‹è¯• |
| inactive | Test@123456 | 900 | 5 | ä¸æ´»è·ƒ | é•¿æœŸæœªç™»å½•æµ‹è¯• |

## ğŸ® æµ‹è¯•åœºæ™¯

### 1. åŸºç¡€åŠŸèƒ½æµ‹è¯•
- **è´¦å·**: `testuser`
- **ç”¨é€”**: æµ‹è¯•æ³¨å†Œã€ç™»å½•ã€ä¸ªäººèµ„æ–™ç¼–è¾‘ç­‰åŸºç¡€åŠŸèƒ½

### 2. ç®¡ç†å‘˜åŠŸèƒ½æµ‹è¯•
- **è´¦å·**: `admin`
- **ç”¨é€”**: æµ‹è¯•ç®¡ç†å‘˜é¢æ¿ã€ç”¨æˆ·ç®¡ç†ã€ç³»ç»Ÿè®¾ç½®ç­‰

### 3. æ–°æ‰‹ä½“éªŒæµ‹è¯•
- **è´¦å·**: `newbie`
- **ç”¨é€”**: æµ‹è¯•æ–°æ‰‹å¼•å¯¼ã€æ•™ç¨‹ã€åˆå§‹å¥–åŠ±ç­‰

### 4. é«˜æ®µä½åŠŸèƒ½æµ‹è¯•
- **è´¦å·**: `master`, `grandmaster`
- **ç”¨é€”**: æµ‹è¯•é«˜çº§åŠŸèƒ½ã€ç‰¹æ®Šå¥–åŠ±ã€æ’è¡Œæ¦œæ˜¾ç¤ºç­‰

### 5. ç‰¹æ®ŠçŠ¶æ€æµ‹è¯•
- **è¢«å°ç¦è´¦å·**: `banned` - æµ‹è¯•ç™»å½•é™åˆ¶ã€å°ç¦æç¤ºç­‰
- **ä¸æ´»è·ƒè´¦å·**: `inactive` - æµ‹è¯•å›å½’ç”¨æˆ·å¤„ç†ã€é‡æ–°æ¿€æ´»ç­‰

## ğŸ”§ å‘½ä»¤è¡Œå‚æ•°

### å®Œæ•´å‚æ•°åˆ—è¡¨

```bash
python scripts/create_test_users.py [é€‰é¡¹]

é€‰é¡¹:
  -h, --help            æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
  -u USERS, --users USERS
                        è¦åˆ›å»ºçš„ç”¨æˆ·åï¼Œç”¨é€—å·åˆ†éš”
  -p PASSWORD, --password PASSWORD
                        æµ‹è¯•ç”¨æˆ·å¯†ç  (é»˜è®¤: Test@123456)
  -r, --reset           å…ˆåˆ é™¤å·²å­˜åœ¨çš„æµ‹è¯•ç”¨æˆ·
  -d, --delete-only     åªåˆ é™¤æµ‹è¯•ç”¨æˆ·ï¼Œä¸åˆ›å»ºæ–°çš„
  -l, --list           åˆ—å‡ºæµ‹è¯•ç”¨æˆ·çŠ¶æ€
```

### ä½¿ç”¨ç¤ºä¾‹

```bash
# åˆ›å»ºç®¡ç†å‘˜å’Œæµ‹è¯•ç”¨æˆ·
python scripts/create_test_users.py --users admin,testuser

# é‡ç½®ç‰¹å®šç”¨æˆ·
python scripts/create_test_users.py --users admin --reset

# ä½¿ç”¨å¼ºå¯†ç 
python scripts/create_test_users.py --password "SecurePass123!"

# æŸ¥çœ‹å“ªäº›æµ‹è¯•è´¦å·å·²å­˜åœ¨
python scripts/create_test_users.py --list

# åˆ é™¤ç‰¹å®šæµ‹è¯•è´¦å·
python scripts/create_test_users.py --users newbie,master --delete-only
```

## âš ï¸ å®‰å…¨æ³¨æ„äº‹é¡¹

### ç”Ÿäº§ç¯å¢ƒä¿æŠ¤
- è„šæœ¬ä¼šæ£€æŸ¥ç¯å¢ƒå˜é‡ï¼Œç¦æ­¢åœ¨ç”Ÿäº§ç¯å¢ƒè¿è¡Œ
- æµ‹è¯•è´¦å·ä½¿ç”¨æ˜æ˜¾çš„æ ‡è¯†æ€§ç”¨æˆ·å
- è¯·å‹¿åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨è¿™äº›æµ‹è¯•è´¦å·

### å¯†ç å®‰å…¨
- é»˜è®¤å¯†ç  `Test@123456` æ»¡è¶³ç³»ç»Ÿå¯†ç è¦æ±‚
- å»ºè®®åœ¨æµ‹è¯•ç¯å¢ƒä¸­ä¿®æ”¹ä¸ºæ›´å®‰å…¨çš„å¯†ç 
- å¯ä»¥é€šè¿‡ `--password` å‚æ•°è‡ªå®šä¹‰å¯†ç 

### æ•°æ®åº“å®‰å…¨
- è„šæœ¬ç›´æ¥æ“ä½œæ•°æ®åº“ï¼Œè¯·è°¨æ…ä½¿ç”¨
- `--reset` å‚æ•°ä¼šåˆ é™¤æ‰€æœ‰æµ‹è¯•ç”¨æˆ·æ•°æ®
- å»ºè®®åœ¨æµ‹è¯•å‰å¤‡ä»½é‡è¦æ•°æ®

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. æ•°æ®åº“è¿æ¥é”™è¯¯**
```
âŒ é”™è¯¯: could not connect to database
```
**è§£å†³**: ç¡®ä¿PostgreSQLæœåŠ¡æ­£åœ¨è¿è¡Œï¼Œæ•°æ®åº“é…ç½®æ­£ç¡®

**2. æƒé™é”™è¯¯**
```
âŒ é”™è¯¯: permission denied
```
**è§£å†³**: ç¡®ä¿æ•°æ®åº“ç”¨æˆ·æœ‰è¶³å¤Ÿçš„æƒé™åˆ›å»ºå’Œä¿®æ”¹ç”¨æˆ·è¡¨

**3. å¯†ç å¼ºåº¦ä¸è¶³**
```
âŒ é”™è¯¯: å¯†ç å¼ºåº¦ä¸è¶³
```
**è§£å†³**: ä½¿ç”¨æ›´å¤æ‚çš„å¯†ç ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦

**4. ç”¨æˆ·å·²å­˜åœ¨**
```
âš ï¸ ç”¨æˆ· 'admin' å·²å­˜åœ¨ï¼Œè·³è¿‡åˆ›å»º
```
**è§£å†³**: ä½¿ç”¨ `--reset` å‚æ•°å…ˆåˆ é™¤å·²æœ‰ç”¨æˆ·ï¼Œæˆ–ä½¿ç”¨å…¶ä»–ç”¨æˆ·å

### è°ƒè¯•æŠ€å·§

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
python scripts/create_test_users.py 2>&1 | tee debug.log

# æ£€æŸ¥æ•°æ®åº“è¿æ¥
python -c "from app.database.postgres import engine; print('æ•°æ®åº“è¿æ¥æ­£å¸¸')" 2>&1

# æ£€æŸ¥ç”¨æˆ·è¡¨ç»“æ„
python -c "
from app.database.postgres import get_async_session
from app.models.user import User
import asyncio

async def check_users():
    async with get_async_session() as session:
        result = await session.execute('SELECT COUNT(*) FROM users')
        count = result.scalar()
        print(f'å½“å‰ç”¨æˆ·æ•°é‡: {count}')

asyncio.run(check_users())
"
```

## ğŸ“ è‡ªå®šä¹‰æ‰©å±•

### æ·»åŠ æ–°çš„æµ‹è¯•è´¦å·ç±»å‹

1. ç¼–è¾‘ `scripts/create_test_users.py`
2. åœ¨ `test_users` åˆ—è¡¨ä¸­æ·»åŠ æ–°çš„ç”¨æˆ·é…ç½®
3. é‡æ–°è¿è¡Œè„šæœ¬

```python
# ç¤ºä¾‹ï¼šæ·»åŠ æ–°çš„æµ‹è¯•è´¦å·
{
    "username": "vip_user",
    "email": "vip@cardbattle.arena",
    "display_name": "VIPç”¨æˆ·",
    "elo_rating": 1500.0,
    "level": 25,
    # ... å…¶ä»–é…ç½®
}
```

### æ‰¹é‡æ“ä½œ

```bash
# åˆ›å»ºå¤šä¸ªç®¡ç†å‘˜è´¦å·
for i in {1..5}; do
    python scripts/create_test_users.py --users admin$i --password "AdminPass123!"
done

# æ¸…ç†æ‰€æœ‰æµ‹è¯•è´¦å·
python scripts/create_test_users.py --delete-only
```

---

**ğŸ“ å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£æˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚**